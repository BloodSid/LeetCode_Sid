package leetcode.editor.cn;
//è¿™ä¸ªé—®é¢˜å’Œâ€œæœ€å¤šèƒ½å®ŒæˆæŽ’åºçš„å—â€ç›¸ä¼¼ï¼Œä½†ç»™å®šæ•°ç»„ä¸­çš„å…ƒç´ å¯ä»¥é‡å¤ï¼Œè¾“å…¥æ•°ç»„æœ€å¤§é•¿åº¦ä¸º2000ï¼Œå…¶ä¸­çš„å…ƒç´ æœ€å¤§ä¸º10**8ã€‚ 
//
// arræ˜¯ä¸€ä¸ªå¯èƒ½åŒ…å«é‡å¤å…ƒç´ çš„æ•´æ•°æ•°ç»„ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæ•°ç»„åˆ†å‰²æˆå‡ ä¸ªâ€œå—â€ï¼Œå¹¶å°†è¿™äº›å—åˆ†åˆ«è¿›è¡ŒæŽ’åºã€‚ä¹‹åŽå†è¿žæŽ¥èµ·æ¥ï¼Œä½¿å¾—è¿žæŽ¥çš„ç»“æžœå’ŒæŒ‰å‡åºæŽ’åºåŽçš„åŽŸæ•°ç»„ç›¸åŒã€‚
// 
//
// æˆ‘ä»¬æœ€å¤šèƒ½å°†æ•°ç»„åˆ†æˆå¤šå°‘å—ï¼Ÿ 
//
// ç¤ºä¾‹ 1: 
//
// 
//è¾“å…¥: arr = [5,4,3,2,1]
//è¾“å‡º: 1
//è§£é‡Š:
//å°†æ•°ç»„åˆ†æˆ2å—æˆ–è€…æ›´å¤šå—ï¼Œéƒ½æ— æ³•å¾—åˆ°æ‰€éœ€çš„ç»“æžœã€‚
//ä¾‹å¦‚ï¼Œåˆ†æˆ [5, 4], [3, 2, 1] çš„ç»“æžœæ˜¯ [4, 5, 1, 2, 3]ï¼Œè¿™ä¸æ˜¯æœ‰åºçš„æ•°ç»„ã€‚ 
// 
//
// ç¤ºä¾‹ 2: 
//
// 
//è¾“å…¥: arr = [2,1,3,4,4]
//è¾“å‡º: 4
//è§£é‡Š:
//æˆ‘ä»¬å¯ä»¥æŠŠå®ƒåˆ†æˆä¸¤å—ï¼Œä¾‹å¦‚ [2, 1], [3, 4, 4]ã€‚
//ç„¶è€Œï¼Œåˆ†æˆ [2, 1], [3], [4], [4] å¯ä»¥å¾—åˆ°æœ€å¤šçš„å—æ•°ã€‚ 
// 
//
// æ³¨æ„: 
//
// 
// arrçš„é•¿åº¦åœ¨[1, 2000]ä¹‹é—´ã€‚ 
// arr[i]çš„å¤§å°åœ¨[0, 10**8]ä¹‹é—´ã€‚ 
// 
// ðŸ‘ 213 ðŸ‘Ž 0


/**
 * æœ€å¤šèƒ½å®ŒæˆæŽ’åºçš„å— II
 *
 * @author IronSid
 * @version 1.0
 * @since 2022-08-13 21:23:30 
 */
public class MaxChunksToMakeSortedIiSolution {
//leetcode submit region begin(Prohibit modification and deletion)
class Solution {

    // æ ˆä¸­è®°å½•æ¯ä¸ª chunk çš„æœ€å¤§å€¼
    // static
    int[] stack = new int[2001];

    public int maxChunksToSorted(int[] arr) {
        int p = 0;
        // å³è¾¹çš„å—çš„æ‰€æœ‰æ•°å­—å‡å¤§äºŽæˆ–ç­‰äºŽå·¦è¾¹çš„å—çš„æ‰€æœ‰æ•°å­—
        for (int a : arr) {
            if (p == 0 || a >= stack[p - 1]) {
                stack[p++] = a;
            } else {
                int max = stack[--p];
                while (p != 0 && a < stack[p - 1]) p--;
                stack[p++] = max;
            }
        }
        return p;
    }
}
//leetcode submit region end(Prohibit modification and deletion)

}
